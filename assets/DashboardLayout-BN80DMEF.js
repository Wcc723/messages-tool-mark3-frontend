import{d as w,k as N,c as k,a as i,F as b,l as _,m as K,n as x,j as o,b as e,t as h,p as D,q as S,h as C,s as v,u as I,r as y,x as m,e as g,i as B}from"./index-BZWAi_Rm.js";import{_ as L}from"./RoleBadge.vue_vue_type_script_setup_true_lang-BreldHby.js";const U={class:"space-y-6"},V={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider"},z={class:"space-y-1"},A=w({__name:"SidebarNav",setup($){const u=K(),c=N(),l=[{title:"Discord 排程",items:[{name:"新增排程",path:"/dashboard/schedule/new",icon:"bi-plus-circle",permissionKey:"showScheduleNew"},{name:"排程行事曆",path:"/dashboard/schedule/calendar",icon:"bi-calendar-check",permissionKey:"showScheduleCalendar"},{name:"排程狀態",path:"/dashboard/schedule/status",icon:"bi-clock-history",permissionKey:"showScheduleStatus"},{name:"Discord 設定",path:"/dashboard/discord",icon:"bi-discord",permissionKey:"showDiscord"}]},{title:"系統管理",showIf:()=>c.isAdmin(),items:[{name:"使用者管理",path:"/dashboard/admin/users",icon:"bi-people",permissionKey:"showUserManagement"}]},{title:"帳號設定",items:[{name:"個人資料",path:"/dashboard/profile",icon:"bi-person-circle",permissionKey:"showProfile"}]}],a=k(()=>l.map(t=>{if(t.showIf&&!t.showIf())return null;const p=t.items.filter(s=>c.shouldShowNavItem(s.permissionKey));return p.length===0?null:{...t,items:p}}).filter(t=>t!==null));function r(t){return u.path===t||u.path.startsWith(`${t}/`)}return(t,p)=>{const s=x("router-link");return o(),i("nav",U,[(o(!0),i(b,null,_(a.value,d=>(o(),i("div",{key:d.title,class:"space-y-2"},[e("h3",V,h(d.title),1),e("div",z,[(o(!0),i(b,null,_(d.items,n=>(o(),D(s,{key:n.path,to:n.path,class:v(["flex items-center px-3 py-2.5 text-gray-700 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition cursor-pointer",{"bg-indigo-50 text-indigo-600":r(n.path)}])},{default:S(()=>[e("i",{class:v([n.icon,"text-lg mr-3"])},null,2),C(" "+h(n.name),1)]),_:2},1032,["to","class"]))),128))])]))),128))])}}}),F={class:"min-h-screen bg-gray-100"},P={class:"h-full px-3 py-4 overflow-y-auto"},j={class:"bg-white shadow-sm sticky top-0 z-30"},E={class:"flex items-center justify-between px-6 py-4"},G={class:"relative"},M=["src"],O={class:"text-left hidden md:block"},R={class:"text-sm font-medium text-gray-700"},q={class:"text-xs text-gray-500"},T={key:0,class:"mt-1"},W={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 border border-gray-200"},H={class:"p-6 relative"},X=w({__name:"DashboardLayout",setup($){const u=B(),c=I(),l=y(!0),a=y(!1),r=k(()=>c.user),t=async()=>{a.value=!1,await c.logout(),u.replace({name:"Login"})};return(p,s)=>{const d=x("router-link"),n=x("router-view");return o(),i("div",F,[e("aside",{class:v(["fixed top-0 left-0 z-40 h-screen transition-transform",l.value?"translate-x-0":"-translate-x-full","w-64 bg-white shadow-lg"])},[e("div",P,[s[3]||(s[3]=e("div",{class:"mb-8 px-3"},[e("h1",{class:"text-2xl font-bold text-indigo-600"},"Discord 排程"),e("p",{class:"text-sm text-gray-500 mt-1"},"訊息管理工具")],-1)),m(A)])],2),e("div",{class:v(["transition-all",l.value?"ml-64":"ml-0"])},[e("header",j,[e("div",E,[e("button",{onClick:s[0]||(s[0]=f=>l.value=!l.value),class:"text-gray-500 hover:text-gray-700 cursor-pointer"},[...s[4]||(s[4]=[e("i",{class:"bi bi-list text-2xl"},null,-1)])]),e("div",G,[e("button",{onClick:s[1]||(s[1]=f=>a.value=!a.value),class:"flex items-center gap-3 hover:bg-gray-50 rounded-lg px-3 py-2 transition cursor-pointer"},[e("img",{src:r.value?.avatar||"https://ui-avatars.com/api/?name=User&background=4F46E5&color=fff",alt:"User",class:"w-8 h-8 rounded-full"},null,8,M),e("div",O,[e("p",R,h(r.value?.name||"訪客"),1),e("p",q,h(r.value?.email||""),1),r.value?.role?(o(),i("div",T,[m(L,{role:r.value.role},null,8,["role"])])):g("",!0)]),s[5]||(s[5]=e("i",{class:"bi bi-chevron-down text-gray-500"},null,-1))]),a.value?(o(),i("div",W,[m(d,{to:"/dashboard/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",onClick:s[2]||(s[2]=f=>a.value=!1)},{default:S(()=>[...s[6]||(s[6]=[C(" 個人資料 ",-1)])]),_:1}),s[7]||(s[7]=e("hr",{class:"my-1"},null,-1)),e("button",{onClick:t,class:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 cursor-pointer"}," 登出 ")])):g("",!0)])])]),e("main",H,[m(n)])],2)])}}});export{X as default};
